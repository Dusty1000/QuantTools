from datetime import date
start_date = '2022-12-31'
end_date = '2024-09-01'
formatted_start_date = date(2022,12,31)
formatted_end_date = date(2024,9,1)
# longer durations causes rate-limiting in data_download


universe = ["A", "AA", "AAOI", "AAPL", "ABBV", "ABT", "ACB", "ACCS", "ACIW", "ACLS", "ACMR", "ADBE", "ADI", "ADMA", "ADN", "ADSK", "ADTN", "AEIS", "AEYE", "AGCO", "AGIO", "ALB", "ALC", "ALGM", "ALKS", "ALNT", "ALNY", "ALOT", "ALRM", "ALSN", "ALV", "AMAT", "AMBR", "AMCR", "AMD", "AMGN", "AMKR", "AMPH", "AMRX", "AMSC", "ANIK", "ANIP", "ANY", "AORT", "AOSL", "AOUT", "APD", "APPN", "APPS", "APYX", "AQMS", "AQST", "ARAY", "ARBE", "ARDX", "ARGX", "ARTW", "ASAN", "ASH", "ASML", "ASND", "ASPN", "ASTC", "ASTS", "ASUR", "ASX", "ASYS", "ATEC", "ATER", "ATOM", "ATRC", "AUPH", "AVAV", "AVD", "AVGO", "AVNS", "AVNW", "AVPT", "AVY", "AXGN", "AXSM", "AXTA", "AXTI", "AZN", "AZTA", "BA", "BABA", "BAK", "BAND", "BAX", "BB", "BBBY", "BBIO", "BC", "BCPC", "BCRX", "BDC", "BDSX", "BDX", "BE", "BEKE", "BELFA", "BELFB", "BHC", "BIDU", "BIIB", "BILI", "BILL", "BIO", "BIOX", "BKSY", "BKYI", "BL", "BLDP", "BLFS", "BLIN", "BLKB", "BLRX", "BMRN", "BMY", "BNGO", "BNR", "BNTX", "BOSC", "BOX", "BOXL", "BRC", "BRKR", "BRSL", "BSX", "BSY", "BW", "BWXT", "BYND", "CAAS", "CAE", "CARG", "CARR", "CARS", "CASI", "CAT", "CBAT", "CBT", "CC", "CCEL", "CCJ", "CDLX", "CDNS", "CE", "CELU", "CENN", "CERT", "CETX", "CHGG", "CHR", "CHT", "CIEN", "CLLS", "CLNN", "CLPS", "CLRO", "CLS", "CMCM", "CMBM", "CMCO", "CMI", "CMPR", "CMRC", "CMTL", "CNDT", "CNH", "CNMD", "COHN", "COHR", "COHU", "COLL", "COMM", "COO", "CPB", "CPHI", "CPIX", "CRM", "CRNC", "CRSR", "CRTO", "CRWD", "CSBR", "CSCO", "CSGP", "CSGS", "CSIQ", "CSL", "CSPI", "CSTL", "CSTM", "CTLP", "CTS", "CTSO", "CTVA", "CVAC", "CVV", "CW", "CWEN", "CXDO", "CYD", "CYRX", "DAKT", "DBX", "DCBO", "DCGO", "DCI", "DCTH", "DD", "DDD", "DDOG", "DE", "DELL", "DGII", "DGLY", "DHR", "DHX", "DIOD", "DMRC", "DOCU", "DOGZ", "DOOO", "DOW", "DQ", "DSS", "DT", "DTSS", "DUO", "DUOT", "DVLT", "DXCM", "EAF", "EB", "EBAY", "EBS", "EDAP", "EFOI", "EGHT", "EH", "EKSO", "ELAN", "ELLO", "ELSE", "ELTK", "ELVA", "EML", "EMN", "ENOV", "ENPH", "ENR", "ENTG", "EPC", "ERIC", "ERJ", "ESI", "ESLT", "ESTA", "ETN", "ETON", "ETSY", "EVGN", "EVLV", "EVO", "EXAS", "EXPE", "EXTR", "EYPT", "FBIO", "FBIOP", "FCEL", "FCUV", "FGEN", "FICO", "FINV", "FIVN", "FLL", "FLNT", "FLUT", "FLUX", "FLWS", "FMC", "FNGR", "FOLD", "FONR", "FORM", "FORTY", "FOXF", "FSI", "FSLR", "FSLY", "FTHM", "FTI", "FTK", "FTV", "FUBO", "FUL", "FUTU", "FVRR", "GDDY", "GDRX", "GDS", "GDYN", "GE", "GEN", "GENI", "GEVO", "GGG", "GILD", "GILT", "GKOS", "GLPG", "GLW", "GMAB", "GOLF", "GOOG", "GOOGL", "GP", "GPRO", "GPUS", "GRABW", "GRFS", "GRVY", "GSK", "GTM", "HAE", "HALO", "HAS", "HBIO", "HCAT", "HCM", "HIMX", "HLIT", "HLLY", "HMC", "HOLX", "HON", "HP", "HPE", "HPQ", "HQY", "HRMY", "HROW", "HTOO", "HUBS", "HUIZ", "HUN", "HXL", "HYFT", "IAC", "IART", "IBM", "ICCC", "ICHR", "ICL", "ICUI", "IDCC", "IDN", "IDXX", "IFF", "IFRX", "IGC", "ILMN", "IMAX", "IMDX", "IMOS", "INCR", "INCY", "INDI", "INDV", "INSG", "INSM", "INSP", "INTC", "INTT", "INTU", "INTZ", "INVA", "INVE", "IONS", "IPGP", "IQ", "IRDM", "ISSC", "ITGR", "ITRN", "ITT", "IVF", "JAZZ", "JBL", "JD", "JFIN", "JG", "JHX", "JKHY", "JKS", "JMIA", "JNJ", "JOBY", "JOYY", "KAI", "KC", "KEP", "KEYS", "KIDS", "KLIC", "KLXE", "KMDA", "KN", "KNDI", "KODK", "KRKR", "KRMD", "KTCC", "KTOS", "KULR", "KVHI", "LAB", "LCID", "LCTX", "LEDS", "LEGN", "LFCR", "LFMD", "LFUS", "LGND", "LITE", "LIVN", "LLY", "LPL", "LPRO", "LPSN", "LPTH", "LQDA", "LRCX", "LSCC", "LSPD", "LTRX", "LUNG", "LVO", "LVS", "LX", "LXFR", "LYB", "LYFT", "MASI", "MASS", "MATV", "MAX", "MAXN", "MCHP", "MDB", "MDT", "MDXG", "MELI", "META", "MG", "MGIC", "MGNI", "MLAB", "MLCO", "MLKN", "MLSS", "MMM", "MMSI", "MNKD", "MNTS", "MODG", "MOGO", "MOGU", "MOMO", "MP", "MPAA", "MRAM", "MRCY", "MREO", "MRK", "MRVI", "MRVL", "MSA", "MSCI", "MSFT", "MSI", "MSTR", "MTD", "MTLS", "MTSI", "MTX", "MU", "MVIS", "MVST", "MX", "MXL", "MYGN", "MYND", "MYSZ", "NBR", "NBY", "NCNO", "NCTY", "NEM", "NEOG", "NEON", "NEPH", "NET", "NEU", "NICE", "NIO", "NIU", "NOK", "NOTE", "NOW", "NTAP", "NTCT", "NTES", "NTNX", "NTRA", "NTWK", "NUWE", "NVAX", "NVCR", "NVDA", "NVO", "NVRI", "NVS", "NVST", "NVT", "NVVE", "NXPI", "OBIO", "OC", "OCFT", "OCUL", "OEC", "OESX", "OFIX", "OI", "OKTA", "OM", "OMCL", "ON", "ONC", "ONDS", "OOMA", "OPAD", "OPEN", "OPK", "OR", "ORA", "ORCL", "ORGO", "OSIS", "OSS", "OSUR", "OTEX", "OTIS", "OUST", "PACB", "PANW", "PAR", "PAYC", "PAYO", "PBI", "PBR", "PCAR", "PCRX", "PCT", "PCTTU", "PCTY", "PD", "PDD", "PDEX", "PEGA", "PEN", "PENG", "PESI", "PFE", "PGEN", "PHAR", "PHG", "PHR", "PI", "PII", "PINC", "PKX", "PLAB", "PLPC", "PLX", "PNR", "POCI", "PODD", "POLA", "POWL", "PPG", "PRCH", "PRGO", "PRGS", "PRLB", "PRO", "PRPH", "PRPL", "PSIX", "PSNL", "PSTG", "PT", "PTC", "PTCT", "PTON", "PUBM", "PYPL", "QBTS", "QCOM", "QD", "QDEL", "QGEN", "QH", "QMCO", "QRVO", "QUIK", "QURE", "RACE", "RBBN", "RDHL", "RDY", "REKR", "RETO", "REZI", "RFIL", "RGEN", "RNG", "ROG", "ROIV", "ROKU", "RPD", "RUN", "RVP", "RVTY", "RVYL", "SANG", "SANM", "SAP", "SCL", "SCOR", "SDGR", "SE", "SEDG", "SHEL", "SIBN", "SID", "SIMO", "SINT", "SIRI", "SJ", "SKIN", "SKLZ", "SKM", "SLAB", "SLB", "SLE", "SLSN", "SMCI", "SMG", "SMTI", "SNCR", "SNDL", "SNES", "SNN", "SNOA", "SNPS", "SNY", "SOGP", "SPCE", "SPIR", "SPNS", "SPOT", "SPR", "SPT", "SQNS", "SRI", "SRPT", "SSD", "SSNC", "SSTK", "ST", "STAA", "STE", "STEM", "STG", "STIM", "STM", "STX", "SUPN", "SWBI", "SWKS", "SY", "SYK", "SYNA", "SYTA", "TAK", "TANH", "TAOP", "TATT", "TBCH", "TBRG", "TCMD", "TCOM", "TCX", "TDC", "TEAM", "TECH", "TECK", "TEL", "TELA", "TENB", "TER", "TEVA", "TFX", "TG", "THRM", "THTX", "TNC", "TNDM", "TNET", "TSEM", "TSLA", "TSM", "TTGT", "TTMI", "TWLO", "TWST", "TXN", "TYL", "UIS", "UI", "ULBI", "UMC", "UP", "UPLD", "UPWK", "URG", "UTHR", "VBIX", "VCYT", "VECO", "VERI", "VERX", "VIAV", "VMAR", "VMD", "VNET", "VNT", "VRCA", "VREX", "VRME", "VRNT", "VTAK", "VTRS", "VTSI", "VYX", "WAB", "WAT", "WB", "WDAY", "WGS", "WIMI", "WIX", "WK", "WKEY", "WKHS", "XAIR", "XERS", "XGN", "XNET", "XOS", "XPEV", "XRAY", "XRX", "XTNT", "XXII", "XYL", "XYZ", "YRD", "ZG", "ZBH", "ZBRA", "ZD", "ZEPP", "ZKIN", "ZLAB", "ZTEK", "ZTS"]
sp500b = "A AA AAOI AAPL ABBV ABT ACB ACCS ACIW ACLS ACMR ADBE ADI ADMA ADN ADSK ADTN AEIS AEYE AGCO AGIO ALB ALC ALGM ALKS ALNT ALNY ALOT ALRM ALSN ALV AMAT AMBR AMCR AMD AMGN AMKR AMPH AMRX AMSC ANIK ANIP ANY AORT AOSL AOUT APD APPN APPS APYX AQMS AQST ARAY ARBE ARDX ARGX ARTW ASAN ASH ASML ASND ASPN ASTC ASTS ASUR ASX ASYS ATEC ATER ATOM ATRC AUPH AVAV AVD AVGO AVNS AVNW AVPT AVY AXGN AXSM AXTA AXTI AZN AZTA BA BABA BAK BAND BAX BB BBBY BBIO BC BCPC BCRX BDC BDSX BDX BE BEKE BELFA BELFB BHC BIDU BIIB BILI BILL BIO BIOX BKSY BKYI BL BLDP BLFS BLIN BLKB BLRX BMRN BMY BNGO BNR BNTX BOSC BOX BOXL BRC BRKR BRSL BSX BSY BW BWXT BYND CAAS CAE CARG CARR CARS CASI CAT CBAT CBT CC CCEL CCJ CDLX CDNS CE CELU CENN CERT CETX CHGG CHR CHT CIEN CLLS CLNN CLPS CLRO CLS CMCM CMBM CMCO CMI CMPR CMRC CMTL CNDT CNH CNMD COHN COHR COHU COLL COMM COO CPB CPHI CPIX CRM CRNC CRSR CRTO CRWD CSBR CSCO CSGP CSGS CSIQ CSL CSPI CSTL CSTM CTLP CTS CTSO CTVA CVAC CVV CW CWEN CXDO CYD CYRX DAKT DBX DCBO DCGO DCI DCTH DD DDD DDOG DE DELL DGII DGLY DHR DHX DIOD DMRC DOCU DOGZ DOOO DOW DQ DSS DT DTSS DUO DUOT DVLT DXCM EAF EB EBAY EBS EDAP EFOI EGHT EH EKSO ELAN ELLO ELSE ELTK ELVA EML EMN ENOV ENPH ENR ENTG EPC ERIC ERJ ESI ESLT ESTA ETN ETON ETSY EVGN EVLV EVO EXAS EXPE EXTR EYPT FBIO FBIOP FCEL FCUV FGEN FICO FINV FIVN FLL FLNT FLUT FLUX FLWS FMC FNGR FOLD FONR FORM FORTY FOXF FSI FSLR FSLY FTHM FTI FTK FTV FUBO FUL FUTU FVRR GDDY GDRX GDS GDYN GE GEN GENI GEVO GGG GILD GILT GKOS GLPG GLW GMAB GOLF GOOG GOOGL GP GPRO GPUS GRABW GRFS GRVY GSK GTM HAE HALO HAS HBIO HCAT HCM HIMX HLIT HLLY HMC HOLX HON HP HPE HPQ HQY HRMY HROW HTOO HUBS HUIZ HUN HXL HYFT IAC IART IBM ICCC ICHR ICL ICUI IDCC IDN IDXX IFF IFRX IGC ILMN IMAX IMDX IMOS INCR INCY INDI INDV INSG INSM INSP INTC INTT INTU INTZ INVA INVE IONS IPGP IQ IRDM ISSC ITGR ITRN ITT IVF JAZZ JBL JD JFIN JG JHX JKHY JKS JMIA JNJ JOBY JOYY KAI KC KEP KEYS KIDS KLIC KLXE KMDA KN KNDI KODK KRKR KRMD KTCC KTOS KULR KVHI LAB LCID LCTX LEDS LEGN LFCR LFMD LFUS LGND LITE LIVN LLY LPL LPRO LPSN LPTH LQDA LRCX LSCC LSPD LTRX LUNG LVO LVS LX LXFR LYB LYFT MASI MASS MATV MAX MAXN MCHP MDB MDT MDXG MELI META MG MGIC MGNI MLAB MLCO MLKN MLSS MMM MMSI MNKD MNTS MODG MOGO MOGU MOMO MP MPAA MRAM MRCY MREO MRK MRVI MRVL MSA MSCI MSFT MSI MSTR MTD MTLS MTSI MTX MU MVIS MVST MX MXL MYGN MYND MYSZ NBR NBY NCNO NCTY NEM NEOG NEON NEPH NET NEU NICE NIO NIU NOK NOTE NOW NTAP NTCT NTES NTNX NTRA NTWK NUWE NVAX NVCR NVDA NVO NVRI NVS NVST NVT NVVE NXPI OBIO OC OCFT OCUL OEC OESX OFIX OI OKTA OM OMCL ON ONC ONDS OOMA OPAD OPEN OPK OR ORA ORCL ORGO OSIS OSS OSUR OTEX OTIS OUST PACB PANW PAR PAYC PAYO PBI PBR PCAR PCRX PCT PCTTU PCTY PD PDD PDEX PEGA PEN PENG PESI PFE PGEN PHAR PHG PHR PI PII PINC PKX PLAB PLPC PLX PNR POCI PODD POLA POWL PPG PRCH PRGO PRGS PRLB PRO PRPH PRPL PSIX PSNL PSTG PT PTC PTCT PTON PUBM PYPL QBTS QCOM QD QDEL QGEN QH QMCO QRVO QUIK QURE RACE RBBN RDHL RDY REKR RETO REZI RFIL RGEN RNG ROG ROIV ROKU RPD RUN RVP RVTY RVYL SANG SANM SAP SCL SCOR SDGR SE SEDG SHEL SIBN SID SIMO SINT SIRI SJ SKIN SKLZ SKM SLAB SLB SLE SLSN SMCI SMG SMTI SNCR SNDL SNES SNN SNOA SNPS SNY SOGP SPCE SPIR SPNS SPOT SPR SPT SQNS SRI SRPT SSD SSNC SSTK ST STAA STE STEM STG STIM STM STX SUPN SWBI SWKS SY SYK SYNA SYTA TAK TANH TAOP TATT TBCH TBRG TCMD TCOM TCX TDC TEAM TECH TECK TEL TELA TENB TER TEVA TFX TG THRM THTX TNC TNDM TNET TSEM TSLA TSM TTGT TTMI TWLO TWST TXN TYL UIS UI ULBI UMC UP UPLD UPWK URG UTHR VBIX VCYT VECO VERI VERX VIAV VMAR VMD VNET VNT VRCA VREX VRME VRNT VTAK VTRS VTSI VYX WAB WAT WB WDAY WGS WIMI WIX WK WKEY WKHS XAIR XERS XGN XNET XOS XPEV XRAY XRX XTNT XXII XYL XYZ YRD ZG ZBH ZBRA ZD ZEPP ZKIN ZLAB ZTEK ZTS"
#universe = ["A","AA","AACG","AAOI","AAPL","ABAT","ABBV","ABCL","ABNB","ABT","ABVC","ACB","ACCS","ACIW","ACLS","ACMR","ACRS","ACTG","ADBE","ADCT","ADEA","ADI","ADMA","ADN","ADSK","ADTN","ADTX","AEC","AEHR","AEIS","AEVA","AEYE","AGAE","AGCO","AGIO","AGMH"]

#sp500b = "A AA AACG AAOI AAPL ABAT ABBV ABCL ABNB ABT ABVC ACB ACCS ACIW ACLS ACMR ACRS ACTG ADBE ADCT ADEA ADI ADMA ADN ADSK ADTN ADTX AEC AEHR AEIS AEVA AEYE AGAE AGCO AGIO AGMH"